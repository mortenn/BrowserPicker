<Window
    x:Class="BrowserPicker.View.BrowserEditor"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converter="clr-namespace:BrowserPicker.Converter"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:properties="clr-namespace:BrowserPicker.Resources"
    xmlns:viewModel="clr-namespace:BrowserPicker.ViewModel"
    Title="{x:Static properties:i18n.WindowsTitleEdit}"
    d:DataContext="{d:DesignInstance viewModel:BrowserViewModel,
                                     d:IsDesignTimeCreatable=true}"
    AllowsTransparency="True"
    Background="Transparent"
    ResizeMode="NoResize"
    ShowInTaskbar="False"
    SizeToContent="WidthAndHeight"
    Topmost="True"
    WindowStartupLocation="CenterScreen"
    WindowStyle="None"
    mc:Ignorable="d">

    <Window.Resources>
        <ResourceDictionary>
            <converter:IconFileToImageConverter x:Key="IconConverter" />
        </ResourceDictionary>
    </Window.Resources>
    <Border
        MinWidth="400"
        Padding="10"
        BorderBrush="#77FFFFFF"
        BorderThickness="2"
        CornerRadius="5"
        MouseLeftButtonDown="DragWindow">
        <Border.Background>
            <LinearGradientBrush EndPoint="0,1">
                <GradientStop Offset="0" Color="#cc272727" />
                <GradientStop Offset="1" Color="#cc000000" />
            </LinearGradientBrush>
        </Border.Background>

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="10" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition />
                <ColumnDefinition Width="20" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>

            <TextBlock
                Grid.Row="0"
                Grid.ColumnSpan="4"
                Margin="5"
                HorizontalAlignment="Center"
                Foreground="White"
                Text="{x:Static properties:i18n.NameBrowsersBtnAddBrowser}" />

            <Image
                Grid.Row="1"
                Grid.RowSpan="3"
                Grid.Column="0"
                MaxWidth="32"
                MaxHeight="32"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Source="{Binding Model.IconPath, Converter={StaticResource IconConverter}}" />

            <TextBlock
                Grid.Row="1"
                Grid.Column="1"
                HorizontalAlignment="Right"
                VerticalAlignment="Center"
                Foreground="White"
                Text="{x:Static properties:i18n.BoxAddBrowserName}" />
            <TextBox
                Grid.Row="1"
                Grid.Column="2"
                Margin="2"
                Text="{Binding Model.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

            <TextBlock
                Grid.Row="2"
                Grid.Column="1"
                HorizontalAlignment="Right"
                VerticalAlignment="Center"
                Foreground="White"
                Text="{x:Static properties:i18n.BoxAddBrowserCommand}" />
            <TextBox
                Grid.Row="2"
                Grid.Column="2"
                Margin="2"
                Text="{Binding Model.Command, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
            <Button
                Grid.Row="2"
                Grid.Column="3"
                Margin="2"
                VerticalAlignment="Stretch"
                Click="Command_Browse"
                Content="..."
                FontSize="8"
                ToolTip="{x:Static properties:i18n.BoxAddBrowserTipBrowseLocations}" />

            <TextBlock
                Grid.Row="3"
                Grid.Column="0"
                Grid.ColumnSpan="2"
                HorizontalAlignment="Right"
                VerticalAlignment="Center"
                Foreground="White"
                Text="{x:Static properties:i18n.BoxAddBrowserCommandArgs}" />
            <TextBox
                Grid.Row="3"
                Grid.Column="2"
                Margin="2"
                Text="{Binding Model.CommandArgs, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

            <TextBlock
                Grid.Row="4"
                Grid.Column="1"
                HorizontalAlignment="Right"
                VerticalAlignment="Center"
                Foreground="White"
                Text="{x:Static properties:i18n.BoxAddBrowserIcon}" />
            <TextBox
                Grid.Row="4"
                Grid.Column="2"
                Margin="2"
                Text="{Binding Model.IconPath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
            <Button
                Grid.Row="4"
                Grid.Column="3"
                Margin="2"
                VerticalAlignment="Stretch"
                Click="Icon_Browse"
                Content="..."
                FontSize="8"
                ToolTip="{x:Static properties:i18n.BoxAddBrowserTipBrowseLocations}" />

            <CheckBox
                Grid.Row="5"
                Grid.Column="2"
                Margin="2,4"
                Content="{x:Static properties:i18n.BoxAddBrowserBoxExpandUrls}"
                Foreground="White"
                IsChecked="{Binding Model.ExpandFileUrls}" />

            <TextBlock
                Grid.Row="6"
                Grid.Column="0"
                Grid.ColumnSpan="2"
                HorizontalAlignment="Right"
                VerticalAlignment="Center"
                Foreground="White"
                Text="{x:Static properties:i18n.BoxAddBrowserPrivacyArgs}" />
            <TextBox
                Grid.Row="6"
                Grid.Column="2"
                Margin="2"
                Text="{Binding Model.PrivacyArgs, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

            <CheckBox
                Grid.Row="7"
                Grid.Column="2"
                Margin="2,4"
                Content="{x:Static properties:i18n.BoxAddBrowserDisableUpdates}"
                Foreground="White"
                IsChecked="{Binding Model.ManualOverride}" />

            <TextBlock
                Grid.Row="8"
                Grid.Column="0"
                Grid.ColumnSpan="2"
                HorizontalAlignment="Right"
                VerticalAlignment="Center"
                Foreground="White"
                Text="{x:Static properties:i18n.BoxAddBrowserHotkey}" />
            <Grid Grid.Row="8" Grid.Column="2">
                <TextBox
                    Margin="2"
                    KeyDown="OnCustomKeyBindDown"
                    KeyUp="OnCustomKeyBindUp"
                    Text="{Binding Model.CustomKeyBind, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                <TextBlock
                    Margin="5,0"
                    VerticalAlignment="Center"
                    Foreground="Silver"
                    IsHitTestVisible="False"
                    Text="{x:Static properties:i18n.BoxAddBrowserHotkeyTip}">
                    <TextBlock.Style>
                        <Style>
                            <Setter Property="UIElement.Visibility" Value="Collapsed" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Model.CustomKeyBind}" Value="">
                                    <Setter Property="UIElement.Visibility" Value="Visible" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </Grid>

            <StackPanel
                Grid.Row="9"
                Grid.Column="0"
                Grid.ColumnSpan="4"
                Margin="0,5,2,5"
                HorizontalAlignment="Right"
                Orientation="Horizontal">
                <Button
                    Padding="10,0"
                    Click="Cancel_OnClick"
                    Content="{x:Static properties:i18n.BtnCancel}" />
                <Button
                    Margin="10,0,0,0"
                    Padding="10,0"
                    Click="Ok_OnClick"
                    Content="{x:Static properties:i18n.BtnOk}" />
            </StackPanel>
        </Grid>
    </Border>
</Window>
